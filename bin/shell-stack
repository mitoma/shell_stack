#!/usr/bin/env ruby
BASE_DIR = File.expand_path(__FILE__.gsub(%r{/[^/]+\z},'') + "/../")
require "#{BASE_DIR}/lib/shell-stack"

command = ARGV.shift
stack_name = ARGV.shift

case command
when 'new'
  Shell::Stack::Base.new(stack_name).create
when 'count'
  Shell::Stack::Base.new(stack_name).count
when 'list'
  Shell::Stack::Base.new(stack_name).list
when 'push'
  values = ARGV
  Shell::Stack::Base.new(stack_name).push(values)
when 'pop'
  num_of_pop = ARGV.shift.to_i
  Shell::Stack::Base.new(stack_name).pop((num_of_pop == 0) ? 1 : num_of_pop)
else
  puts "Usage: shell-stack new|count|list|push|pop stack_name [args]"
end
